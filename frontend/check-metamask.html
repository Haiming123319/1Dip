<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaMask æ£€æŸ¥åŠ©æ‰‹</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f7fa;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin: 16px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .step {
            display: flex;
            align-items: flex-start;
            margin: 16px 0;
            padding: 16px;
            border-radius: 8px;
            background: #f8f9ff;
            border-left: 4px solid #4f46e5;
        }
        .step-number {
            background: #4f46e5;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 16px;
            flex-shrink: 0;
        }
        .big-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin: 16px 0;
        }
        .big-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .status {
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
            font-weight: 500;
        }
        .status.checking { background: #e0f2fe; color: #0277bd; }
        .status.success { background: #e8f5e8; color: #2e7d32; }
        .status.error { background: #ffebee; color: #d32f2f; }
        .status.warning { background: #fff3e0; color: #f57c00; }
        .download-link {
            display: inline-block;
            background: #f39c12;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            margin: 8px 0;
        }
        .metamask-icon {
            font-size: 48px;
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1 style="text-align: center; color: #333;">ğŸ¦Š MetaMask æ£€æŸ¥åŠ©æ‰‹</h1>
        <div class="metamask-icon">ğŸ¦Š</div>
        <p style="text-align: center; color: #666;">è®©æˆ‘ä»¬æ£€æŸ¥ä½ çš„MetaMaské’±åŒ…çŠ¶æ€</p>
    </div>

    <div class="card">
        <h2>ğŸ“‹ æ£€æŸ¥æ¸…å•</h2>
        
        <div class="step">
            <div class="step-number">1</div>
            <div>
                <strong>æŸ¥çœ‹æµè§ˆå™¨æ‰©å±•æ </strong><br>
                åœ¨æµè§ˆå™¨å³ä¸Šè§’ï¼ˆåœ°å€æ æ—è¾¹ï¼‰æŸ¥çœ‹æ˜¯å¦æœ‰ ğŸ¦Š ç‹ç‹¸å›¾æ ‡<br>
                <small style="color: #666;">å¦‚æœæ²¡æœ‰çœ‹åˆ°ï¼Œå¯èƒ½éœ€è¦ç‚¹å‡»æ‹¼å›¾å›¾æ ‡ï¼ˆæ‰©å±•ç®¡ç†ï¼‰æ‰¾æ‰¾</small>
            </div>
        </div>

        <div class="step">
            <div class="step-number">2</div>
            <div>
                <strong>æ£€æŸ¥æ‰©å±•æ˜¯å¦å¯ç”¨</strong><br>
                å¦‚æœçœ‹åˆ°ç‹ç‹¸å›¾æ ‡ä½†æ˜¯ç°è‰²çš„ï¼Œè¯´æ˜æ‰©å±•è¢«ç¦ç”¨äº†<br>
                <small style="color: #666;">ç‚¹å‡»å›¾æ ‡æˆ–è€…å³é”®é€‰æ‹©"å¯ç”¨"</small>
            </div>
        </div>

        <div class="step">
            <div class="step-number">3</div>
            <div>
                <strong>è‡ªåŠ¨æ£€æµ‹</strong><br>
                ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®è®©ç¨‹åºè‡ªåŠ¨æ£€æµ‹MetaMaskçŠ¶æ€
            </div>
        </div>
    </div>

    <div class="card">
        <button class="big-button" id="checkBtn">ğŸ” å¼€å§‹æ£€æµ‹ MetaMask</button>
        <div id="result"></div>
    </div>

    <div class="card" id="installGuide" style="display: none;">
        <h2>ğŸ“¥ å®‰è£… MetaMask</h2>
        <p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…MetaMaskï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼š</p>
        
        <div class="step">
            <div class="step-number">1</div>
            <div>
                <strong>ä¸‹è½½ MetaMask</strong><br>
                <a href="https://metamask.io/download/" target="_blank" class="download-link">
                    å‰å¾€å®˜ç½‘ä¸‹è½½ MetaMask
                </a><br>
                <small style="color: #666;">æ”¯æŒ Chromeã€Firefoxã€Edgeã€Safari ç­‰æµè§ˆå™¨</small>
            </div>
        </div>

        <div class="step">
            <div class="step-number">2</div>
            <div>
                <strong>å®‰è£…æ‰©å±•</strong><br>
                ç‚¹å‡»"æ·»åŠ åˆ°æµè§ˆå™¨"æŒ‰é’®ï¼Œç„¶åç‚¹å‡»"æ·»åŠ æ‰©å±•"
            </div>
        </div>

        <div class="step">
            <div class="step-number">3</div>
            <div>
                <strong>è®¾ç½®é’±åŒ…</strong><br>
                å®‰è£…åä¼šè‡ªåŠ¨æ‰“å¼€è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©"åˆ›å»ºæ–°é’±åŒ…"æˆ–"å¯¼å…¥ç°æœ‰é’±åŒ…"
            </div>
        </div>

        <div class="step">
            <div class="step-number">4</div>
            <div>
                <strong>åˆ·æ–°é¡µé¢</strong><br>
                å®‰è£…å®Œæˆåï¼Œåˆ·æ–°æœ¬é¡µé¢é‡æ–°æ£€æµ‹
            </div>
        </div>
    </div>

    <script>
        document.getElementById('checkBtn').addEventListener('click', function() {
            const resultDiv = document.getElementById('result');
            const installGuide = document.getElementById('installGuide');
            
            resultDiv.innerHTML = '<div class="status checking">ğŸ” æ­£åœ¨æ£€æµ‹ MetaMask...</div>';
            
            // ç­‰å¾…ä¸€ä¸‹è®©ç”¨æˆ·çœ‹åˆ°æ£€æµ‹è¿‡ç¨‹
            setTimeout(() => {
                checkMetaMask();
            }, 1000);
            
            function checkMetaMask() {
                let html = '';
                
                // æ£€æŸ¥ window å¯¹è±¡
                html += '<div class="status checking">ğŸ” æ£€æŸ¥æµè§ˆå™¨ç¯å¢ƒ...</div>';
                
                if (typeof window === 'undefined') {
                    html += '<div class="status error">âŒ æµè§ˆå™¨ç¯å¢ƒå¼‚å¸¸</div>';
                    resultDiv.innerHTML = html;
                    return;
                }
                
                html += '<div class="status success">âœ… æµè§ˆå™¨ç¯å¢ƒæ­£å¸¸</div>';
                
                // æ£€æŸ¥ ethereum å¯¹è±¡
                html += '<div class="status checking">ğŸ” æ£€æŸ¥ window.ethereum...</div>';
                
                setTimeout(() => {
                    if (typeof window.ethereum === 'undefined') {
                        html += '<div class="status error">âŒ æœªæ£€æµ‹åˆ° window.ethereum</div>';
                        html += '<div class="status warning">âš ï¸ è¿™é€šå¸¸æ„å‘³ç€ï¼š<br>1. MetaMask æœªå®‰è£…<br>2. MetaMask è¢«ç¦ç”¨<br>3. ä½¿ç”¨äº†ä¸æ”¯æŒçš„æµè§ˆå™¨</div>';
                        resultDiv.innerHTML = html;
                        installGuide.style.display = 'block';
                        return;
                    }
                    
                    html += '<div class="status success">âœ… æ£€æµ‹åˆ° window.ethereum</div>';
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯ MetaMask
                    if (window.ethereum.isMetaMask) {
                        html += '<div class="status success">âœ… ç¡®è®¤æ˜¯ MetaMask é’±åŒ…</div>';
                    } else {
                        html += '<div class="status warning">âš ï¸ æ£€æµ‹åˆ°å…¶ä»–é’±åŒ…ï¼Œå¯èƒ½ä¸æ˜¯ MetaMask</div>';
                    }
                    
                    // å°è¯•è·å–è´¦æˆ·
                    html += '<div class="status checking">ğŸ” æ£€æŸ¥é’±åŒ…è¿æ¥çŠ¶æ€...</div>';
                    
                    setTimeout(async () => {
                        try {
                            const accounts = await window.ethereum.request({ 
                                method: 'eth_accounts' 
                            });
                            
                            if (accounts.length > 0) {
                                html += `<div class="status success">âœ… å·²è¿æ¥è´¦æˆ·: ${accounts[0]}</div>`;
                            } else {
                                html += '<div class="status warning">âš ï¸ æœªè¿æ¥ä»»ä½•è´¦æˆ·ï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼‰</div>';
                            }
                            
                            // æ£€æŸ¥ç½‘ç»œ
                            try {
                                const chainId = await window.ethereum.request({ 
                                    method: 'eth_chainId' 
                                });
                                const networks = {
                                    '0x1': 'Ethereum ä¸»ç½‘',
                                    '0x5': 'Goerli æµ‹è¯•ç½‘',
                                    '0xaa36a7': 'Sepolia æµ‹è¯•ç½‘',
                                    '0x89': 'Polygon ä¸»ç½‘'
                                };
                                const networkName = networks[chainId] || `æœªçŸ¥ç½‘ç»œ (${chainId})`;
                                html += `<div class="status success">âœ… å½“å‰ç½‘ç»œ: ${networkName}</div>`;
                            } catch (error) {
                                html += `<div class="status warning">âš ï¸ æ— æ³•è·å–ç½‘ç»œä¿¡æ¯: ${error.message}</div>`;
                            }
                            
                            html += '<div class="status success">ğŸ‰ MetaMask å·¥ä½œæ­£å¸¸ï¼ä½ å¯ä»¥å›åˆ°ä¸»åº”ç”¨å°è¯•è¿æ¥äº†</div>';
                            html += '<div style="text-align: center; margin: 20px 0;"><a href="index.html" style="background: #4f46e5; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: bold;">è¿”å›ä¸»åº”ç”¨</a></div>';
                            
                        } catch (error) {
                            html += `<div class="status error">âŒ é’±åŒ…é€šä¿¡å¤±è´¥: ${error.message}</div>`;
                        }
                        
                        resultDiv.innerHTML = html;
                    }, 1000);
                }, 1000);
            }
        });
    </script>
</body>
</html> 